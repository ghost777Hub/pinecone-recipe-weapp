## pinecone-recipe-weapp
一个关于食谱的微信小程序


--------------------------
## 前言
1. 该文件主要书写项目开发的流程记录，项目结构，和一些依赖包的文档链接，以及记录一下遇到的bug
<br/><br/>

## 开发前期准备
* 首先是确定自己要开发的小程序类目，自己去微信文档，小程序个人开放类目中寻找了一番，最终确定做一个餐饮类图鉴的项目，因为感觉比较容易过审核。
* 接下来就确定了一下项目包含哪些功能，设计稿，开发，各种的要考虑的情况，画了份思维导图，梳理了一下。
* 然后我就开始做产品原型图的设计了，之前没有画过这个，不过我听过【墨刀】这个软件挺好用的，用来画原型图，比较方便，于是下载了。在网上借鉴一些成品的APP和H5项目，然后融合后，把自己产品页面的结构给画出来了，花了一天，挺快的。
* 然后上述工作一共是花了2天了，接下来我准备画UI设计稿了。之前也没画过，但是这回不像画原型图那么顺利了。我下载了【sketch】，画了2个小时，才画了一个页面的UI稿子。因为没有做过UI设计，期间对颜色，线条，还有一大堆，调整了很久，改了还想改，总觉得不好看。最后我终于画好了一张，看着还行。但是速度太慢了。我于是决定放弃不画了，太费力气了。直接写代码，边写边调整。
* 第四天开始项目搭建，创建了git仓库，然后思考了一下开源项目的版权问题，查了一些资料，最终选择了一个比较保障原创者版权的协议。然后就开始，搭建项目结构，安装一些插件，编写公共样式，抽一些公共组件。
* 接下来的时间，几乎一样，开发中。详细的就不叙述了，否则太啰嗦。最后一共花了13天，项目编写完成，手机预览测试过了。然后提交了代码，等待审核。
<br/><br/>

## 项目目录结构[开发版]
1. 项目主要结构：
```
├─ mockserver     -----------------node搭建的本地服务，用与测试数据
│  ├─ .DS_Store
│  ├─ app.js
│  ├─ bin
│  │  └─ www
│  ├─ database    ----------------准备的虚拟数据存放
│  │  ├─ .DS_Store
│  │  ├─ data100.js
│  │  └─ index.js
│  ├─ package.json
│  ├─ public  
│  │  └─ .DS_Store
│  ├─ routes      -------------------本地服务的路由
│  │  ├─ index.js
│  │  └─ users.js
│  └─ views
│     ├─ error.jade
│     ├─ index.jade
│     └─ layout.jade
├─ package.json
├─ project.config.json
├─ src
│  ├─ .DS_Store
│  ├─ api         ----------------ajax接口请求封装
│  │  ├─ request.ts
│  │  └─ url.ts
│  ├─ app.config.ts
│  ├─ app.scss
│  ├─ app.tsx
│  ├─ assets      ----------------项目图片样式公共资源存放
│  │  ├─ .DS_Store
│  │  ├─ images
│  │  │  └─ .DS_Store
│  │  └─ styles
│  │     └─ var.scss
│  ├─ components  --------------------项目组件文件夹
│  │  └─ .DS_Store
│  ├─ index.html
│  ├─ pages       ------------------项目页面文件夹
│  │  └─ .DS_Store
│  ├─ redux       --------------------redux数据管理仓库
│  │  └─ .DS_Store
│  └─ utils       --------------------一些公共的通用方法
│     ├─ .DS_Store
│     ├─ common.ts
│     └─ storage.ts
└─ tsconfig.json  --------------------typescript配置文件
```
<br/><br/>

## 项目中安装的依赖相关文档链接
* 使用了taro-iconfont-cli插件，解决微信中不能预览多色图标问题
> 文档参考地址[https://gitee.com/mirrors/Taro-Iconfont]

* taro-ui库
> 文档参考地址[https://taro-ui.jd.com/#/]

* 使用了redux-toolkit，大大减少了书写redux所产生的一些重复性模板代码
> 文档参考地址[https://redux-toolkit.js.org/]

* typescript代码类型约束
> 文档参考地址[https://www.tslang.cn/]

* mockjs模拟数据
> 文档参考地址[http://mockjs.com/]

* express框架用于快速搭建本地服务
> 文档参考地址[https://www.expressjs.com.cn/]
<br/><br/>

## 常用命令
npm 运行多个命令
```
"dev:weapp": "npm run build:weapp -- --watch & cd ./mockserver && npm run start"
```
<br/><br/>

## 遇到的BUG归总：
* 审核问题  小程序种类

* 协议问题，版权保护

* 整个图片资源过大，22.5MB

* 使用mockjs图片路径问题

* tab标签页数据是动态还是写死问题

* UI设计稿，自己做问题

* mockjs无法直接使用问题

* 项目文件组件文件层级管理问题

* 音乐问题 线上本地

* h5端头像用户名问题，虽然不上线h5，但还是做了兼容处理

* 组件间嵌套过深，事件不断向父组件向上传递，性能问题。和一些重复代码问题

* 启动多个命令行问题，并行和串行

* 持久化stoage无法使用问题

* 不同端UI样式问题  和100vh问题

* 自己封装圆环进度条组件时 遇到的封装问题

* if判断空对象问题  导致页面数据 图片引用控制台报错

* 页面loading组件导致下拉记在数据后，页面重新渲染 回到顶部

* 数据请求，页面x向滑动时，导致数据返回结果后，页面布局错乱问题